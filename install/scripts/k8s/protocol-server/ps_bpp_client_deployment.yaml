apiVersion: apps/v1
kind: Deployment
metadata:
  name: bpp-client
  namespace: beckn-onix
spec:
  replicas: 1
  selector:
    matchLabels:
      app: bpp-client
  template:
    metadata:
      labels:
        app: bpp-client
    spec:
      containers:
      - name: bpp-client
        image: fidedocker/protocol-server
        ports:
        - containerPort: 6001
        volumeMounts:
        - name: bpp-client-config-volume
          mountPath: /usr/src/app/config
        - name: bpp-client-schemas-volume
          mountPath: /usr/src/app/schemas
        - name: bpp-client-logs-volume
          mountPath: /usr/src/app/logs
        env:
        - name: BPP_CLIENT_PORT
          value: "6001"
        - name: REDIS_URL
          value: "your-redis-url"
        - name: MONGO_USERNAME
          value: "your-mongo-username"
        - name: MONGO_PASSWORD
          value: "your-mongo-password"
        - name: MONGO_URL
          value: "your-mongo-url"
        - name: MONGO_DB_NAME
          value: "your-mongo-db-name"
        - name: RABBITMQ_USERNAME
          value: "your-rabbitmq-username"
        - name: RABBITMQ_PASSWORD
          value: "your-rabbitmq-password"
        - name: RABBITMQ_URL
          value: "your-rabbitmq-url"
        - name: WEBHOOK_URL
          value: "your-webhook-url"
        - name: BPP_SUBSCRIBER_ID
          value: "your-bpp-subscriber-id"
        - name: BPP_SUBSCRIBER_URL
          value: "your-bpp-subscriber-url"
        - name: REGISTRY_URL
          value: "your-registry-url"
        - name: BPP_SUBSCRIBER_KEY_ID
          value: "your-bpp-subscriber-key-id"
      volumes:
      - name: bpp-client-config-volume
        configMap:
          name: bpp-config
          items:
          - key: bpp-client.yml
            path: default.yml
      - name: bpp-client-schemas-volume
        emptyDir: {}
      - name: bpp-client-logs-volume
        emptyDir: {}
