apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "common.name" . }}-config
  namespace: {{ .Values.namespace }}
data:
  swf.properties: |
   swf.load.complete.config.tables.if.count.less.than=500
   swf.user.password.encrypted=false
   swf.plugins.background.core.workers.numThreads=1
   swf.application.authentication.required=false

   # Encryption support can be enabled if keystore is configured
   swf.encryption.support=false
   swf.key.store.directory=./.keystore
   swf.key.store.password=venky12
   swf.key.entry.succinct.password=succinct12

   # External host/port/scheme for gateway, derived from Helm values
   swf.host={{ .Values.externalDomain }}
   swf.external.port={{ .Values.service.port }}
   swf.external.scheme=http

   # Embedded H2 database configuration (mirrors gateway swf.properties-sample)
   swf.jdbc.driver=org.h2.Driver
   swf.jdbc.url=jdbc:h2:./database/standalone;AUTO_SERVER=TRUE;
   swf.jdbc.userid=standalone
   swf.jdbc.password=standalone
   swf.jdbc.validationQuery=values(1)
   swf.jdbc.dbschema=PUBLIC
   swf.jdbc.dbschema.setonconnection=true
   swf.jdbc.set.dbschema.command=set schema public

   swf.api.keys.case=SNAKE
   swf.api.root.required=false

   swf.ftl.dir=src/main/resources/templates

   ## Beckn Gateway configurations.
   beckn.auth.enabled=true

   # Use externalDomain as subscriber_id by default (similar to local sample)
   in.succinct.beckn.gateway.subscriber_id={{ .Values.externalDomain }}
   in.succinct.beckn.gateway.public_key_id={{ .Values.externalDomain }}.k1

   in.succinct.onet.country.iso.3=IND
   in.succinct.onet.country.iso.2=IN
   in.succinct.onet.name=onix
